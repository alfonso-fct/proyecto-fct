<div class="container">
  <h2>{{ editandoId ? 'Editar Producto' : 'Agregar Producto' }}</h2>

  <form [formGroup]="productoForm" (ngSubmit)="onSubmit()">
    <div class="grid grid-cols-2 gap-4">
      <div>
        <label class="block mb-1 font-medium">Nombre</label>
        <input type="text" formControlName="nombre" class="border p-2 w-full rounded" />
      </div>

      <div>
        <label class="block mb-1 font-medium">Precio</label>
        <input type="number" formControlName="precio" class="border p-2 w-full rounded" />
      </div>

      <div>
        <label class="block mb-1 font-medium">Stock</label>
        <input type="number" formControlName="stock" class="border p-2 w-full rounded" />
      </div>

      <div>
        <label class="block mb-1 font-medium">Imagen</label>
        <input type="file" (change)="onFileSelected($event)" />
      </div>

      <div class="col-span-2">
        <label class="block mb-1 font-medium">Descripci√≥n</label>
        <textarea formControlName="descripcion" class="border p-2 w-full rounded"></textarea>
      </div>
    </div>

    <!-- Bot√≥n centrado y peque√±o -->
    <div class="button-container mt-4">
      <button type="submit" [disabled]="cargando" class="btn-guardar">
        {{ cargando ? 'Guardando...' : (editandoId ? 'Actualizar Producto' : 'Guardar Producto') }}
      </button>
    </div>
  </form>

  <p class="mensaje mt-3" [ngClass]="mensaje.includes('‚úÖ') || mensaje.includes('‚úèÔ∏è') || mensaje.includes('üóëÔ∏è') ? 'text-green-600' : 'text-red-600'">
    {{ mensaje }}
  </p>

  <!-- Tabla de productos -->
  <div class="table-container mt-8 overflow-x-auto">
    <table class="w-full border-collapse">
      <thead>
        <tr class="bg-gray-100 text-left">
          <th class="p-2 border">Imagen</th>
          <th class="p-2 border">Nombre</th>
          <th class="p-2 border">Precio</th>
          <th class="p-2 border">Stock</th>
          <th class="p-2 border">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let p of productos" class="hover:bg-gray-50">
          <td class="p-2 border">
            <img *ngIf="p.imagen" [src]="p.imagen" alt="img" class="product-img" />
          </td>
          <td class="p-2 border">{{ p.nombre }}</td>
          <td class="p-2 border">{{ p.precio | currency }}</td>
          <td class="p-2 border">{{ p.stock }}</td>
          <td class="p-2 border">
            <button (click)="editarProducto(p)" class="btn-action btn-edit">Editar</button>
            <button (click)="eliminarProducto(p.idproducto)" class="btn-action btn-delete">Eliminar</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

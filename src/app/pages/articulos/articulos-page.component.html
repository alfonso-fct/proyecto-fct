<div class="container mt-4">
  <h2>Gestión de Artículos</h2>

  <!-- Formulario para agregar artículo -->
  <form [formGroup]="articuloForm" (ngSubmit)="agregarArticulo()" class="mb-4">
    <div class="mb-3">
      <label class="form-label">Nombre</label>
      <input type="text" class="form-control" formControlName="nombre" />
      @if (articuloForm.get('nombre')?.invalid && articuloForm.get('nombre')?.touched) {
        <div class="text-danger">
          El nombre es obligatorio
        </div>
      }
    </div>

    <div class="mb-3">
      <label class="form-label">Características</label>
      <textarea class="form-control" formControlName="caracteristicas"></textarea>
    </div>

    <div class="mb-3">
      <label class="form-label">Precio</label>
      <input type="number" class="form-control" formControlName="precio" />
      @if (articuloForm.get('precio')?.invalid && articuloForm.get('precio')?.touched) {
        <div class="text-danger">
          El precio debe ser un número válido mayor o igual a 0
        </div>
      }
    </div>

    @if (!editandoId) {
      <button type="submit" class="btn btn-primary" [disabled]="articuloForm.invalid">
        Agregar
      </button>
    }
    @if (editandoId) {
      <button type="button" class="btn btn-success me-2" (click)="modificarArticulo()" [disabled]="articuloForm.invalid">
        Modificar
      </button>
      <button type="button" class="btn btn-secondary" (click)="cancelarEdicion()">
        Cancelar
      </button>
    }
  </form>

  <!-- Lista de artículos -->
  <h3>Lista de Artículos</h3>

  @if (articulos.length === 0) {
    <p>No hay artículos disponibles.</p>
  } @else {
    <ul class="list-group">
      @for (art of articulos; track art.id) {
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div>
            <strong>{{ art.nombre }}</strong> - {{ art.caracteristicas }} - {{ art.precio }}€
          </div>
          <div>
            <button class="btn btn-warning btn-sm me-2" (click)="editarArticulo(art)">Modificar</button>
            <button class="btn btn-danger btn-sm" (click)="borrarArticulo(art.id)">Borrar</button>
          </div>
        </li>
      }
    </ul>
  }
</div>


